async function work() {
    try {
        const response = await db.query()
        console.log(response);
        const processedResponse = await processRequest(response)
        console.log(processedResponse)
    }
} catch (err) {
    console.log(err)
}



async function getDeptNames() {
  try {
    const response = await db.query(`SELECT name FROM department`);
    console.log(response);
    const rolesArray = await map(response);
    console.log(rolesArray);
    return rolesArray;
  } catch (err) {
    console.log(err);
  }
}


//From the NoSQL MongoDB:

try {
    const results = await db.collection("bookCollection").deleteOne({});
    res.status(200).json(results);
} catch (err) {
    console.log(err);
    res.status(500);
}


app.post("/create", async (req, res) => {
  // The title and author will be provided by the request body
  try {
    console.log(req.body)
    const results = await db.collection("bookCollection").insertOne(
      { title: req.body.title, author: req.body.author }

      res.json(results)


  } catch (err) {
    if (err) throw err;
  }
  );
});


app.delete("/delete", async (req, res) => {
  try {
    const results = await db
      .collection("bookCollection")
      .deleteOne({ _id: ObjectId(req.body.id) });
    res.status(200).json(results);
  } catch (err) {
    console.log(err);
    res.status(500);
  }
});